
lparallel Changes
=================

= 2.0.0

* keyword arguments to psort besides :key have been replaced with a
  single :granularity argument; the old arguments are now ignored

* removed deprecated aliases from 1.2.0 and 1.3.0 (you may not be
  aware of them since they haven't been listed in the documentation)

* A function defined with defpun is now optimized for N worker threads
  where N is the number of cores. The old behavior is available with
  defpun*, which defines a function that is optimized for N-1 workers
  (and has less overhead).

* added psort* -- like psort but targets N-1 workers

* improved performance of psort

* task categories are now compared with eql; same for ptree node ids

= 1.7.1

* exiting CCL while a kernel exists no longer generates warnings
* preserved lambda list info for a function defined with defpun when
  no lambda list keywords are present
* nested chain calls no longer cause multiple values to be discarded
* error for undefined ptree node now signals in the proper context
* reduced overhead for promises and futures; other optimizations

= 1.7.0

* added pdotimes
* optimized cognate functions and macros when they are called inside
  worker threads; e.g. pmap in (future (pmap ...)) no longer blocks
  a worker

= 1.6.3

* add CLISP support

= 1.6.2

* fixed tests on abcl

= 1.6.1

* update and clarify docs

= 1.6.0

* added clear-ptree-errors -- for resuming after an error
* added clear-ptree -- for recomputing from scratch
* improved task handling for ptrees
* :lparallel now in *features* after load
* defpun no longer transforms pfuncall forms

= 1.5.5

* in Allegro, end-kernel is no longer required before exit
* ptree-fn now accepts non-symbol node identifiers

= 1.5.4

* pmaps had sometimes rejected symbol as function

= 1.5.3

* Allegro fixed

= 1.5.2

* handle nil kernel in task-categories-running
* kernel-bindings was returning superfluous bindings

= 1.5.1

* disable the new open coding on ABCL, which fails to compile uses of it

= 1.5.0

* pmap and pmap-into are now open-coded in the case of 1 vector being
  mapped to a vector -- allows a large performance boost in some CL
  implementations (like SBCL) when array types are known

* SBCL is now able to terminate when live kernel(s) exist --
  previously, end-kernel needed to be called on all kernels before
  exiting (which is good practice but is no longer required)

* added try-receive-result -- non-blocking version of receive-result

= 1.4.5

* include fix for sbcl map-into bug #1001043

= 1.4.3

* compensate for upcoming sbcl thread changes (only affects tests)
* documentation updates

= 1.4.2

* functions defined with defpun now report argument names in slime et al
* added defpun/type, typed version of defpun

= 1.4.1

* fixed defpun benchmarks

= 1.4.0

* added function task-categories-running
* new special variable *debug-tasks-p* -- setting it to false will
  transfer errors instead of invoking the debugger inside tasks;
  default is true
* added convenience function invoke-transfer-error for local control
  over debugging tasks:
    (task-handler-bind ((error #'invoke-transfer-error)) ...)
    (task-handler-bind ((error #'invoke-debugger)) ...)

= 1.3.3

* internal cleanup

= 1.3.2

* add a few profile functions
* doc tweak

= 1.3.1

* fixed tests on abcl

= 1.3.0

* new support for fine-grained parallelism with `defpun'
* new work-stealing model with lockless queues and optional spinning;
  enabled by default on SBCL, others default to central queue
* added pfind, pcount, plet-if, pfuncall
* fixed redundant restart in `chain'
* `fulfill' now accepts non-promises (never succeeds)
* removed high optimizations exposed in some API functions
* added shell script for unthrottling CPUs in Linux
* renamed *kernel-task-category* -> *task-category*
          *kernel-task-priority* -> *task-priority*
           kernel-handler-bind   -> task-handler-bind
           preduce/partial       -> preduce-partial
  old names are still available

= 1.2.3

* for promises created with (promise), fixed intermittent error during
  high contention on some SBCL Linux machines; fixes flood-test failure
 
= 1.2.2

* (pmap nil ...) was accidentally pessimized in the many-parts case
 
= 1.2.1

* more consistent end-kernel behavior -- ensured that no more tasks
  are executed once an idle state is detected

= 1.2.0

* added function cancel-timeout; submit-timeout now returns a timeout object
* renamed emergency-kill-tasks to kill-tasks; old name is still available
* minor optimization to ptrees
* added type checks to psort arguments
* switched test framework to eos

= 1.1.0

* added :wait option to end-kernel -- block until the kernel has shut down
  (please read the documentation for end-kernel before using)
* bound *print-circle* to t when printing a kernel -- avoids SBCL + SLIME
  crash when evaluating the single form (setf *kernel* (make-kernel ...))

= 1.0.12

* improved some tests (pmap-into-test, flood-test)
* minor cleanup

= 1.0.11

* slightly smaller footprint for futures and speculations
* better handling of edge cases in some tests

= 1.0.10

* fixed a test (sleeping-worker-replacement-test)

= 1.0.9

* non-error conditions now recognized during recursive handling

= 1.0.8

* handle zero-arity special case for pmap-into and pmaplist-into

= 1.0.7

* minor cleanup

= 1.0.6

* removed needless kernel handler in delay
* various minor cleanup

= 1.0.5

* better README and .asd description

= 1.0.4

* added description fields to .asd file and augment README
* error for an invalid task priority is now correctable

= 1.0.3

* benchmarks now working with ABCL
* better handling of non-array/non-list result sequences in pmap-into

= 1.0.2

* fix non-array/non-list result sequences in pmap-into

= 1.0.1

* clarified docs
* trivial cleanup

= 1.0.0

* birthday
